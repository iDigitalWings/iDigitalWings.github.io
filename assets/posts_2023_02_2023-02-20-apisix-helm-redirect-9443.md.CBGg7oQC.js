import{_ as s,a,o as i,aj as e}from"./chunks/framework.Ba_Ek9Jm.js";const u=JSON.parse('{"title":"ApiSix Https 重定向到 9443 的问题","description":"","frontmatter":{"title":"ApiSix Https 重定向到 9443 的问题","date":"2023-02-20T00:00:00.000Z","tags":["apisix"],"category":["DevOps"]},"headers":[],"relativePath":"posts/2023/02/2023-02-20-apisix-helm-redirect-9443.md","filePath":"posts/2023/02/2023-02-20-apisix-helm-redirect-9443.md","lastUpdated":1718173059000}'),t={name:"posts/2023/02/2023-02-20-apisix-helm-redirect-9443.md"},n=e(`<h2 id="禁用-port-forwarded" tabindex="-1">禁用 port forwarded <a class="header-anchor" href="#禁用-port-forwarded" aria-label="Permalink to &quot;禁用 port forwarded&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Disable</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># proxy_set_header X-Forwarded-Port</span></span></code></pre></div><p>这部分是由 apisix 的 render 生成，chart 里面没有修改的地方。</p><h2 id="使用-443-启动" tabindex="-1">使用 443 启动 <a class="header-anchor" href="#使用-443-启动" aria-label="Permalink to &quot;使用 443 启动&quot;">​</a></h2><p>values：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">gateway:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  tls:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    enabled:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    containerPort:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 443</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#pluginAttrs:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#  redirect:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#    https_port: 443</span></span></code></pre></div><ul><li>plugin attrs 没有起作用。</li><li>使用 443 端口启动提示无权限</li></ul><p>使用 root 运行 pod：</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">  securityContext</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">   runAsNonRoot</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">   runAsUser</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#  configurationSnippet:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#    main: |</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#      user root;</span></span></code></pre></div>`,9),p=[n];function l(h,r,d,o,k,c){return i(),a("div",null,p)}const y=s(t,[["render",l]]);export{u as __pageData,y as default};
