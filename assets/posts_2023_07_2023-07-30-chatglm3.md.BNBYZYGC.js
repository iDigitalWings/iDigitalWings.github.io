import{_ as s,a as i,o as a,aj as t}from"./chunks/framework.Ba_Ek9Jm.js";const e="/assets/4036100204264875.D1FxCcdZ.png",l="/assets/4036900963169500.CJWV2amp.png",_=JSON.parse('{"title":"ChatGLM 3","description":"","frontmatter":{"title":"ChatGLM 3","date":"2023-07-30T00:00:00.000Z","tags":["ai","ml"],"category":["AI"]},"headers":[],"relativePath":"posts/2023/07/2023-07-30-chatglm3.md","filePath":"posts/2023/07/2023-07-30-chatglm3.md","lastUpdated":1718173059000}'),p={name:"posts/2023/07/2023-07-30-chatglm3.md"},h=t(`<p><a href="https://github.com/THUDM/ChatGLM3" target="_blank" rel="noreferrer">https://github.com/THUDM/ChatGLM3</a></p><p><a href="https://modelscope.cn/models/ZhipuAI/chatglm3-6b/summary" target="_blank" rel="noreferrer">https://modelscope.cn/models/ZhipuAI/chatglm3-6b/summary</a></p><p>模型下载 modelscope API下载</p><p>pip install modelscope</p><p>from modelscope import snapshot_download model_dir = snapshot_download(&quot;ZhipuAI/chatglm3-6b&quot;, revision = &quot;v1.0.0&quot;)</p><p>print(model_dir)</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">model_path</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;THUDM/chatglm3-6b&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">model_path</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;/root/.cache/modelscope/hub/ZhipuAI/chatglm3-6b&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">tokenizer</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> AutoTokenizer.from_pretrained</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">model_path,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> trust_remote_code=True,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> local_files_only=True</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">model</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> AutoModel.from_pretrained</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">model_path,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> trust_remote_code=True,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> local_files_only=True</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.cuda</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span></code></pre></div><p>streamlit run web_demo2.py</p><p><img src="`+e+'" alt=""></p><h2 id="demo" tabindex="-1">demo <a class="header-anchor" href="#demo" aria-label="Permalink to &quot;demo&quot;">​</a></h2><p>cd composite_demo ls .</p><p><img src="'+l+'" alt=""></p><p>conda create -n chatglm3-demo python=3.10 conda activate chatglm3-demo pip install -r requirements.txt ipython kernel install --name chatglm3-demo --user</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">PYTORCH_CUDA_ALLOC_CONF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">max_split_size_mb:512</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> MODEL_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/root/.cache/modelscope/hub/ZhipuAI/chatglm3-6b</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> streamlit</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  main.py</span></span></code></pre></div>',14),n=[h];function o(r,d,k,c,m,g){return a(),i("div",null,n)}const y=s(p,[["render",o]]);export{_ as __pageData,y as default};
